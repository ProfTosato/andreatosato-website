---
const { 
  title, 
  description = "Andrea Tosato - Professor of Law at SMU Dedman School of Law specializing in UCC Article 12, digital assets law, cryptocurrency regulation, commercial law, and secured transactions. Leading expert on blockchain and commercial law reform." 
} = Astro.props;
const currentPath = Astro.url.pathname;

// Enhanced meta description based on page
let pageDescription = description;
if (currentPath === '/' && !description) {
  pageDescription = "Andrea Tosato is a leading expert on UCC Article 12 and digital assets law. Professor at SMU Dedman School of Law, key contributor to 2022 UCC amendments governing cryptocurrency, NFTs, and blockchain-based commercial transactions.";
} else if (currentPath === '/about-me' && !description) {
  pageDescription = "Andrea Tosato is a Professor of Law at SMU specializing in UCC Article 12, digital assets law, and commercial law. Key drafter of the 2022 UCC amendments for cryptocurrency and blockchain transactions.";
} else if (currentPath === '/articles' && !description) {
  pageDescription = "Research articles by Andrea Tosato on UCC Article 12, digital assets law, cryptocurrency regulation, stablecoins, commercial law, and secured transactions.";
}

// Schema.org structured data
const schemaData = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Andrea Tosato",
  "alternateName": "Prof. Andrea Tosato",
  "givenName": "Andrea",
  "familyName": "Tosato",
  "jobTitle": "Professor of Law",
  "description": "Leading expert on UCC Article 12, digital assets law, cryptocurrency regulation, and commercial law",
  "knowsAbout": [
    "UCC Article 12",
    "Digital Assets Law",
    "Cryptocurrency Law",
    "Commercial Law",
    "Secured Transactions",
    "Bankruptcy Law",
    "Blockchain Technology",
    "Stablecoins",
    "NFTs",
    "Controllable Electronic Records"
  ],
  "affiliation": {
    "@type": "Organization",
    "name": "SMU Dedman School of Law",
    "url": "https://www.smu.edu/law"
  },
  "alumniOf": [
    {
      "@type": "Organization",
      "name": "University of Cambridge"
    },
    {
      "@type": "Organization",
      "name": "University of Pavia"
    }
  ],
  "url": "https://www.andreatosato.com",
  "sameAs": [
    "https://www.smu.edu/law/faculty/profiles/tosato-andrea",
    "https://www.linkedin.com/in/andrea-tosato-5a862067/",
    "https://x.com/Andrea_Tosato",
    "https://papers.ssrn.com/sol3/cf_dev/AbsByAuth.cfm?per_id=1851659",
    "https://scholar.google.com/citations?user=gvFpxc4AAAAJ"
  ],
  "worksFor": {
    "@type": "EducationalOrganization",
    "name": "SMU Dedman School of Law"
  },
  "award": [
    "Grant Gilmore Award - American College of Commercial Finance Lawyers",
    "Shook Hardy Bacon Research Award",
    "American Law Institute Membership"
  ]
};
---
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title ? `${title} | Andrea Tosato` : 'Andrea Tosato | UCC Article 12 Expert | Digital Assets Law Professor'}</title>
  <meta name="description" content={pageDescription}>
  
  <!-- Additional SEO meta tags -->
  <meta name="keywords" content="Andrea Tosato, UCC Article 12, digital assets law, cryptocurrency law, commercial law, secured transactions, blockchain law, stablecoins, NFTs, controllable electronic records, bankruptcy law">
  <meta name="author" content="Andrea Tosato">
  <link rel="canonical" href={`https://www.andreatosato.com${currentPath}`}>
  
  <!-- Open Graph meta tags for social media -->
  <meta property="og:title" content={title ? `${title} | Andrea Tosato` : 'Andrea Tosato | UCC Article 12 Expert | Digital Assets Law'}>
  <meta property="og:description" content={pageDescription}>
  <meta property="og:url" content={`https://www.andreatosato.com${currentPath}`}>
  <meta property="og:type" content="profile">
  <meta property="og:image" content="https://www.andreatosato.com/profile.jpg">
  
  <!-- Twitter Card meta tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@Andrea_Tosato">
  <meta name="twitter:creator" content="@Andrea_Tosato">
  <meta name="twitter:title" content={title ? `${title} | Andrea Tosato` : 'Andrea Tosato | UCC Article 12 Expert'}>
  <meta name="twitter:description" content={pageDescription}>
  <meta name="twitter:image" content="https://www.andreatosato.com/profile.jpg">
  
  <!-- Schema.org structured data -->
  <script type="application/ld+json" set:html={JSON.stringify(schemaData)} />
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.7;
      color: #000;
      background: #fff;
      font-size: 17px;
    }
    /* Navigation - high contrast */
    nav {
      border-bottom: 1px solid #000;
      padding: 1.5rem 0;
      background: #fff;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .nav-name {
      font-size: 1.2rem;
      font-weight: 400;
      letter-spacing: -0.01em;
    }
    .nav-name a {
      color: #000;
      text-decoration: none;
    }
    
    /* Hamburger toggle button */
    .nav-toggle {
      display: none;
      flex-direction: column;
      gap: 5px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
    }
    .nav-toggle span {
      width: 25px;
      height: 2px;
      background-color: #000;
      transition: 0.3s;
    }
    
    .nav-links {
      display: flex;
      gap: 2.5rem;
      list-style: none;
    }
    .nav-links a {
      color: #000;
      text-decoration: none;
      font-size: 1rem;
      transition: opacity 0.2s;
    }
    .nav-links a:hover,
    .nav-links a.active {
      opacity: 0.5;
    }
    /* Main Content */
    main {
      min-height: 60vh;
    }
    /* Footer */
    footer {
      border-top: 1px solid #000;
      padding: 2rem;
      text-align: center;
      margin-top: 4rem;
      font-size: 0.9rem;
      color: #666;
    }
    /* Mobile Navigation */
    @media (max-width: 900px) {
      .nav-container {
        position: relative;
      }
      
      .nav-toggle {
        display: flex;
      }
      
      .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #fff;
        flex-direction: column;
        padding: 0;
        margin-top: 1.5rem;
        border: 1px solid #000;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        gap: 0;
      }
      
      .nav-links.active {
        display: flex;
      }
      
      .nav-links li {
        border-bottom: 1px solid #f0f0f0;
      }
      
      .nav-links li:last-child {
        border-bottom: none;
      }
      
      .nav-links a {
        display: block;
        padding: 1rem 1.5rem;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-container">
      <div class="nav-name">
        <a href="/">Andrea Tosato</a>
      </div>
      <button class="nav-toggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <ul class="nav-links">
        <li><a href="/about-me" class={currentPath === '/about-me' ? 'active' : ''}>About Me</a></li>
        <li><a href="/books" class={currentPath === '/books' ? 'active' : ''}>Books</a></li>
        <li><a href="/articles" class={currentPath === '/articles' ? 'active' : ''}>Articles</a></li>
        <li><a href="/essays" class={currentPath === '/essays' ? 'active' : ''}>Essays</a></li>
        <li><a href="/teaching" class={currentPath === '/teaching' ? 'active' : ''}>Teaching</a></li>
        <li><a href="/law-reform" class={currentPath === '/law-reform' ? 'active' : ''}>Law Reform</a></li>
        <li><a href="/invited-talks" class={currentPath === '/invited-talks' ? 'active' : ''}>Invited Talks and Media</a></li>
      </ul>
    </div>
  </nav>
  <main>
    <slot />
  </main>
  <footer>
    <p>Â© 2025 Andrea Tosato. All rights reserved.</p>
  </footer>
  
  <script>
    const navToggle = document.querySelector('.nav-toggle');
    const navLinks = document.querySelector('.nav-links');
    
    if (navToggle) {
      navToggle.addEventListener('click', function() {
        navLinks.classList.toggle('active');
      });
      
      // Close menu when clicking a link
      const links = navLinks.querySelectorAll('a');
      links.forEach(link => {
        link.addEventListener('click', function() {
          navLinks.classList.remove('active');
        });
      });
    }
  </script>
</body>
</html>
